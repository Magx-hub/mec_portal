<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Attendance Report</title>
  <style>
    /* PDF-specific styles */
    @page {
      size: A4;
      margin: 2cm;
    }
    
    body {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 12pt;
      line-height: 1.5;
      color: #333;
      margin: 0;
      padding: 0;
    }
    
    .container {
      width: 100%;
    }
    
    .header {
      text-align: center;
      margin-bottom: 30px;
      border-bottom: 2px solid #4a5568;
      padding-bottom: 20px;
    }
    
    .school-name {
      font-size: 24pt;
      font-weight: bold;
      margin: 0;
      color: #2b6cb0;
    }
    
    .report-title {
      font-size: 18pt;
      margin: 10px 0;
    }
    
    .report-meta {
      font-size: 10pt;
      color: #4a5568;
    }
    
    .section {
      margin-bottom: 30px;
    }
    
    .section-title {
      font-size: 16pt;
      font-weight: bold;
      margin-bottom: 15px;
      color: #2d3748;
      border-bottom: 1px solid #e2e8f0;
      padding-bottom: 5px;
    }
    
    .stats-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .stat-card {
      width: 18%;
      background-color: #f7fafc;
      border: 1px solid #e2e8f0;
      border-radius: 5px;
      padding: 10px;
      margin-bottom: 15px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 18pt;
      font-weight: bold;
      margin: 5px 0;
    }
    
    .stat-label {
      font-size: 8pt;
      color: #718096;
      text-transform: uppercase;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
      font-size: 10pt;
    }
    
    th {
      background-color: #edf2f7;
      text-align: left;
      padding: 8px;
      font-weight: bold;
      border-bottom: 2px solid #cbd5e0;
    }
    
    td {
      padding: 8px;
      border-bottom: 1px solid #e2e8f0;
      vertical-align: top;
    }
    
    tr:nth-child(even) {
      background-color: #f7fafc;
    }
    
    .attendance-percentage {
      width: 100%;
      height: 10px;
      background-color: #edf2f7;
      border-radius: 5px;
      overflow: hidden;
    }
    
    .attendance-bar {
      height: 100%;
      background-color: #4299e1;
    }
    
    .footer {
      text-align: center;
      font-size: 8pt;
      color: #718096;
      margin-top: 30px;
      border-top: 1px solid #e2e8f0;
      padding-top: 10px;
    }
    
    .page-break {
      page-break-after: always;
    }
    
    /* Status colors */
    .status-present {
      color: #22c55e;
    }
    
    .status-absent {
      color: #ef4444;
    }
    
    .status-late {
      color: #eab308;
    }
    
    .status-leave {
      color: #3b82f6;
    }

    /* Responsive table for narrow screens */
    @media (max-width: 600px) {
      .stats-grid {
        flex-direction: column;
      }
      
      .stat-card {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1 class="school-name">MagMax Educational Center</h1>
      <h2 class="report-title">Teacher Attendance Report</h2>
      <p class="report-meta">
        Period: {{ start_date }} to {{ end_date }} | Generated on: {{ report_generated }}
      </p>
    </div>
    
    <!-- Summary Section -->
    <div class="section">
      <h3 class="section-title">Summary Statistics</h3>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value">{{ total_teachers }}</div>
          <div class="stat-label">Total Teachers</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-value">{{ total_present }}</div>
          <div class="stat-label">Present Days</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-value">{{ total_absent }}</div>
          <div class="stat-label">Absent Days</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-value">{{ total_late }}</div>
          <div class="stat-label">Late Days</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-value">{{ total_leave }}</div>
          <div class="stat-label">Leave Days</div>
        </div>
      </div>
    </div>
    
    <!-- Detailed Report Section -->
    <div class="section">
      <h3 class="section-title">Teacher Attendance Details</h3>
      
      <table>
        <thead>
          <tr>
            <th>Teacher</th>
            <th>Department</th>
            <th>Work Days</th>
            <th>Present</th>
            <th>Absent</th>
            <th>Late</th>
            <th>Leave</th>
            <th>Work Hours</th>
            <th>Attendance %</th>
          </tr>
        </thead>
        <tbody>
          {% for report in reports %}
            <tr>
              <td>{{ report.user_name }}</td>
              <td>{{ report.department|default:"-" }}</td>
              <td>{{ report.total_work_days }}</td>
              <td class="status-present">{{ report.present_days }}</td>
              <td class="status-absent">{{ report.absent_days }}</td>
              <td class="status-late">{{ report.late_days }}</td>
              <td class="status-leave">{{ report.leave_days }}</td>
              <td>{{ report.work_hours|floatformat:1 }}</td>
              <td>
                <div>{{ report.attendance_percentage|floatformat:1 }}%</div>
                <div class="attendance-percentage">
                  <div class="attendance-bar" style="width: {{ report.attendance_percentage }}%;"></div>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    
    <!-- Department Summary (if more than 25 teachers, start a new page) -->
    {% if reports|length > 25 %}
      <div class="page-break"></div>
    {% endif %}

    <!-- Footer -->
    <div class="footer">
      <p>This is an official document of MagMax Educational Center. Attendance records are based on daily check-in/out data.</p>
      <p>For any discrepancies, please contact the administration office.</p>
    </div>
  </div>
</body>
</html>