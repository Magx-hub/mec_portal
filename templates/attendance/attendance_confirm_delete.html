{% extends "base.html" %}

{% block title %}Confirm Delete Attendance Record{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="max-w-2xl mx-auto">
    <!-- Header -->
    <div class="mb-6 flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-600 mr-2" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
      </svg>
      <h1 class="text-2xl font-bold text-gray-800">Delete Attendance Record</h1>
    </div>

    <!-- Messages -->
    {% if messages %}
      <div class="mb-6">
        {% for message in messages %}
          <div class="{% if message.tags == 'success' %}bg-green-100 border-green-500 text-green-700{% elif message.tags == 'error' %}bg-red-100 border-red-500 text-red-700{% else %}bg-blue-100 border-blue-500 text-blue-700{% endif %} px-4 py-3 rounded relative border-l-4" role="alert">
            <span class="block sm:inline">{{ message }}</span>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Confirmation Card -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
      <div class="bg-red-50 p-4 border-b border-red-100">
        <div class="flex">
          <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-red-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="ml-3">
            <h3 class="text-lg font-medium text-red-800">Confirm Delete</h3>
            <div class="mt-2 text-sm text-red-700">
              <p>Are you sure you want to delete this attendance record? This action <strong>cannot be undone</strong>.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Record Details -->
      <div class="p-6 border-b border-gray-200">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Record Details</h3>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="border-b border-gray-200 pb-2">
            <span class="text-sm font-medium text-gray-500">Teacher:</span>
            <span class="ml-2 text-sm text-gray-900">{{ attendance.teacher.first_name }} {{ attendance.teacher.last_name }}</span>
          </div>
          
          <div class="border-b border-gray-200 pb-2">
            <span class="text-sm font-medium text-gray-500">Date:</span>
            <span class="ml-2 text-sm text-gray-900">{{ attendance.date|date:"Y-m-d" }}</span>
          </div>
          
          <div class="border-b border-gray-200 pb-2">
            <span class="text-sm font-medium text-gray-500">Week Number:</span>
            <span class="ml-2 text-sm text-gray-900">{{ attendance.week_num }}</span>
          </div>
          
          <div class="border-b border-gray-200 pb-2">
            <span class="text-sm font-medium text-gray-500">Status:</span>
            <span class="ml-2 text-sm 
              {% if attendance.status == 'present' %}
                text-green-700
              {% elif attendance.status == 'absent' %}
                text-red-700
              {% elif attendance.status == 'late' %}
                text-yellow-700
              {% elif attendance.status == 'leave' %}
                text-blue-700
              {% elif attendance.status == 'half_day' %}
                text-purple-700
              {% else %}
                text-gray-700
              {% endif %}">
              {{ attendance.get_status_display }}
            </span>
          </div>
          
          {% if attendance.check_in_time %}
          <div class="border-b border-gray-200 pb-2">
            <span class="text-sm font-medium text-gray-500">Check-in Time:</span>
            <span class="ml-2 text-sm text-gray-900">{{ attendance.check_in_time }}</span>
          </div>
          {% endif %}
          
          {% if attendance.check_out_time %}
          <div class="border-b border-gray-200 pb-2">
            <span class="text-sm font-medium text-gray-500">Check-out Time:</span>
            <span class="ml-2 text-sm text-gray-900">{{ attendance.check_out_time }}</span>
          </div>
          {% endif %}
        </div>
        
        {% if attendance.remarks %}
        <div class="mt-4">
          <span class="text-sm font-medium text-gray-500">Remarks:</span>
          <p class="mt-1 text-sm text-gray-900 bg-gray-50 p-2 rounded">{{ attendance.remarks }}</p>
        </div>
        {% endif %}
      </div>

      <!-- Confirmation Form -->
      <div class="px-6 py-4 bg-gray-50 text-right">
        <form method="post">
          {% csrf_token %}
          <div class="flex justify-end space-x-3">
            <a href="{% url 'attendance:attendance-list' %}" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
              Cancel
            </a>
            <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
              Delete Record
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

