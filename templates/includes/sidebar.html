{% load static %}

<!-- Sidebar -->
<aside class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg border-r border-gray-200 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out"
       id="sidebar">
    
    <!-- Sidebar Header -->
    <div class="flex items-center justify-between h-16 px-6 border-b border-gray-200">
        <div class="flex items-center mb-4">
            <img class="h-8 w-auto" src="{% static 'images/mec.png' %}" alt="MEC Portal">
            <span class="ml-2 text-xl font-semibold text-gray-900">MEC Portal</span>
        </div>
        <!-- Close button for mobile -->
        <button type="button" 
                class="lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
                id="sidebar-close-button">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Sidebar Navigation -->
    <nav class="flex-1 px-4 py-6 overflow-y-auto">
        <ul class="space-y-2">
            {% if user.is_authenticated %}
                <!-- Dashboard -->
                <li>
                    <a href="{% url 'users:dashboard' %}" 
                       class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 {% if request.resolver_match.url_name == 'dashboard' %}bg-blue-50 text-blue-700 border-r-2 border-blue-700{% endif %}">
                        <i class="fas fa-tachometer-alt mr-3 text-lg"></i>
                        <span>Dashboard</span>
                    </a>
                </li>

                <!-- Attendance -->
                <li>
                    <a href="{% url 'attendance:attendance-list' %}" 
                       class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 {% if request.resolver_match.url_name == 'attendance' %}bg-blue-50 text-blue-700 border-r-2 border-blue-700{% endif %}">
                        <i class="fas fa-calendar-check mr-3 text-lg"></i>
                        <span>Attendance</span>
                    </a>
                </li>

                <!-- Lesson Plans -->
                <li>
                    <a href="{% url 'lessonplans:lesson_list' %}" 
                       class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 {% if request.resolver_match.url_name == 'lessonplans' %}bg-blue-50 text-blue-700 border-r-2 border-blue-700{% endif %}">
                        <i class="fas fa-book-open mr-3 text-lg"></i>
                        <span>Lesson Plans</span>
                    </a>
                </li>

                <!-- Reports -->
                <li>
                    <a href="{% url 'users:coming-soon' %}" 
                       class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 {% if request.resolver_match.url_name == 'reports' %}bg-blue-50 text-blue-700 border-r-2 border-blue-700{% endif %}">
                        <i class="fas fa-chart-line mr-3 text-lg"></i>
                        <span>End Of Term Reports</span>
                    </a>
                </li>
                <!-- Weekly Performance Monitor -->
                <li>
                    <a href="{% url 'users:coming-soon' %}" 
                       class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 {% if request.resolver_match.url_name == 'reports' %}bg-blue-50 text-blue-700 border-r-2 border-blue-700{% endif %}">
                        <i class="fas fa-chart-line mr-3 text-lg"></i>
                        <span>Weekly Performance Monitor</span>
                    </a>
                </li>

                <!-- Logout -->
                <li class="pt-4 border-t border-gray-200">
                    <a href="{% url 'users:logout' %}" 
                       class="flex items-center px-4 py-3 text-red-600 rounded-lg hover:bg-red-50 transition-colors duration-200">
                        <i class="fas fa-sign-out-alt mr-3 text-lg"></i>
                        <span>Logout</span>
                    </a>
                </li>
            {% else %}
                <!-- Login -->
                <li>
                    <a href="{% url 'users:login' %}" 
                       class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 {% if request.resolver_match.url_name == 'login' %}bg-blue-50 text-blue-700 border-r-2 border-blue-700{% endif %}">
                        <i class="fas fa-sign-in-alt mr-3 text-lg"></i>
                        <span>Login</span>
                    </a>
                </li>

                <!-- Register -->
                <li>
                    <a href="{% url 'users:register' %}" 
                       class="flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200 {% if request.resolver_match.url_name == 'register' %}bg-blue-50 text-blue-700 border-r-2 border-blue-700{% endif %}">
                        <i class="fas fa-user-plus mr-3 text-lg"></i>
                        <span>Register</span>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>

    <!-- Sidebar Footer -->
    {% if user.is_authenticated %}
        <div class="border-t border-gray-200 p-4">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    {% if user.profile.avatar %}
                        <img class="h-10 w-10 rounded-full object-cover" src="{{ user.profile.avatar.url }}" alt="User avatar">
                    {% else %}
                        <div class="h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center">
                            <i class="fas fa-user text-gray-600"></i>
                        </div>
                    {% endif %}
                </div>
                <div class="ml-3 flex-1 min-w-0">
                    <p class="text-sm font-medium text-gray-900 truncate">
                        {{ user.get_full_name|default:user.username }}
                    </p>
                    <p class="text-xs text-gray-500 truncate">
                        {{ user.email }}
                    </p>
                </div>
            </div>
        </div>
    {% endif %}
</aside>